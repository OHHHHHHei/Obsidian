#### 1. PID是什么？—— 核心思想

PID是一种控制算法，其唯一目标就是通过调节输出，使系统的**实际值 (Process Variable)** 尽可能快、准、稳地达到**设定值 (Setpoint)**，并保持住。它由三个部分组成，分别关注误差的**现在、过去和未来**。

- **P - 比例 (Proportional)** proporcional: 关注**现在** 的误差。
- **I - 积分 (Integral)**: 回顾**过去** 的累积误差。
- **D - 微分 (Derivative)**: 预测**未来** 的误差趋势。

**完整公式**:

 $$u(t) = K_p e(t) + K_i \int_0^t e(\tau) d\tau + K_d \frac{de(t)}{dt}$$

---

#### 2. 三大核心组件详解

- **P项 - 比例 (Proportional)**
    
    - **作用**: 提供最主要的控制力。误差越大，控制力越强，使系统能**快速响应**。
        
    - **局限**: 单独使用时，为了抵抗持续的干扰（如重力），系统必须保留一个**稳态误差 (Steady-State Error)**，否则P项输出为零，无法产生持续的力。
    
- **I项 - 积分 (Integral)**
    
    - **作用**: 通过**累积**过去的所有误差，提供一种“记忆”能力。它的使命就是**消除稳态误差**。只要误差存在，积分项就会持续发力，直到误差为零。此时，积分项会保持一个恒定值，用于抵消系统的持续干扰。
        
    - **局限**: 积分的累积具有滞后性，是导致**超调 (Overshoot)** 和**积分饱和 (Integral Windup)** 的主要原因。
    
- **D项 - 微分 (Derivative)**
    
    - **作用**: 计算误差的变化率，提供**预测与阻尼 (Prediction & Damping)**。它能预见到系统将要冲过头而提前“刹车”，并有效抑制系统的来回振荡，使系统更快稳定。
        
    - **局限**: 对高频**噪声极其敏感**，可能导致控制器输出剧烈抖动。通常需要加滤波器
    

---

#### 3. PID调参 (Tuning)

调参的目标是在系统的**稳定性 (稳)**、**准确性 (准)**、**快速性 (快)** 之间找到最佳平衡。

- **黄金法则 (手动整定)**: **先P，再I，后D**。
    
    1. 关掉I和D，增大P，获得较快的响应（允许振荡）。
        
    2. 加入I，消除稳态误差。
        
    3. 加入D，抑制P和I带来的超调和振荡。
        
- **经典方法**: **齐格勒-尼科尔斯 (Z-N) 法**是一种工程化的方法，通过实验（如临界振荡法）找到系统的临界增益 $K_u$ 和临界周期 $T_u$，然后根据表格计算出PID参数的推荐**起始值**。

# 离散形式下的PID控制器

离散形式下，积分项变成了求和
微分项变成了向后差分
$$u(k) = K_p e(k) + K_i T \sum_{j=0}^{k} e(j) + K_d \frac{e(k) - e(k-1)}{T}$$
我们一般把 $T$ 与也放入 $K_i$ 与 $K_d$ 当中